my_widget_script={init:function(t,e){var a=this.parseInitJson(e);this.initDynamicContent(a),window.onresize=(()=>this.resize()),this.addEventListeners(),this.parent_class.init(t,()=>JSON.stringify(a.widgetData)),this.addRequiredFieldIndicators(),this.setUpInitialState(),this.adjustForMode(t),this.checkForNames()},to_json:function(){var t=this.parent_class.to_json(),e=(this.getDynamicContent(),{widgetData:JSON.parse(t)});return JSON.stringify(e)},from_json:function(t){var e=JSON.parse(t);this.parent_class.from_json(JSON.stringify(e.widgetData))},test_data:function(){var t=JSON.parse(this.parent_class.test_data()),e={widgetData:t};return JSON.stringify(e)},is_valid:function(t){var e,a=!1,r="";if($("#the_form").find("select, textarea, input").each((t,i)=>{$(i).prop("required")&&($(i).val()||(a=!0,e=$(i).attr("id"),r+=e+" is required \n"))}),$("input[type='date']").each((t,e)=>{var i=$(e).val();if(i){var n=this.isValidDate(i);n||(a=!0,r+="Please enter valid date in form 'YYYY-MM-DD'")}}),$("input[type='time']").each((t,e)=>{var i=$(e).val();if(i){var n=this.isValidTime(i);n||(a=!0,r+="Please enter valid time in form 'hh:mm' - 24 hr time")}}),a)return bootbox.alert(r);var i=[];return i},is_edited:function(){return this.parent_class.is_edited()},reset_edited:function(){return this.parent_class.reset_edited()},parseInitJson:function(t){var e;e="string"==typeof t?t:t();var a=JSON.parse(e);return a},initDynamicContent:function(t){},adjustForMode:function(t){"edit"!==t&&"edit_dev"!==t?($(".disableOnView").prop("disabled",!0),$("input[type='date']").removeClass(".hasDatePicker"),$(".hideView").hide()):($("input[type='date']").each((t,e)=>{this.checkDateFormat($(e))}),$("input[type='time']").each((t,e)=>{this.checkTimeFormat($(e))}))},addEventListeners:function(){$("#alertButton").on("click",t=>{bootbox.alert("You've pressed an alert button")}),$("#confirmButton").on("click",t=>{this.dialogConfirm("Make a choice:",t=>{t?$(".entryPrint").text("You chose OK"):$(".entryPrint").text("You canceled or closed the dialog")})}),$("#userEntryButton").on("click",t=>{this.runBasedOnInput("Enter a number from 0-10",t=>{t<=10&&t>=0?$(".entryPrint").text("You entered: "+t):$(".entryPrint").text("You did not enter an appropriate value")})})},addRequiredFieldIndicators:function(){$(".needForTableLab").each((t,e)=>{$(e).html("<span class='hideView' style='color:blue'>#</span>"+$(e).html())}),$(".requiredLab").each((t,e)=>{$(e).html("<span class='hideView' style='color:red'>*</span>"+$(e).html())})},isValidTime:function(t){var e="^(((([0-1][0-9])|(2[0-3])):[0-5][0-9]))$";return!!t.match(e)},isTimeSupported:function(){var t=document.createElement("input");t.setAttribute("type","time");var e=!0;return"time"!==t.type&&(e=!1),this.timeSupported=e,t.remove(),e},timeSupported:!0,checkTimeFormat:function(t){if(!this.timeSupported){t.next(".timeWarning").remove();var e=t.val(),a=this.isValidTime(e);a||t.after('<div class="text-danger timeWarning">Enter time as "hh:mm" in 24-hr format</div>'),this.resize()}},isValidDate:function(t){var e=/^\d{4}-\d{2}-\d{2}$/;if(!t.match(e))return!1;var a=new Date(t),r=a.getTime();return!(!r&&0!==r)&&a.toISOString().slice(0,10)===t},isDateSupported:function(){var t=document.createElement("input");t.setAttribute("type","date");var e=!0;return"date"!==t.type&&(e=!1),this.dateSupported=e,t.remove(),e},dateSupported:!0,checkDateFormat:function(t){if(!this.dateSupported){t.next(".dateWarning").remove();var e=t.val(),a=this.isValidDate(e);a||t.after('<div class="text-danger dateWarning">Enter date as "YYYY-MM-DD"</div>'),t.datepicker({dateFormat:"yy-mm-dd"}),this.resize()}},setUpInitialState:function(){$(".myLeftCol").addClass("col-12 col-sm-6 col-md-4 col-lg-3 text-left text-sm-right"),this.isDateSupported(),this.isTimeSupported(),$("input[type='date']").prop("placeholder","YYYY-MM-DD").on("change",t=>{this.checkDateFormat($(t.currentTarget))}),$("input[type='time']").prop("placeholder","hh:mm").on("change",t=>{this.checkTimeFormat($(t.target))}),$("textarea.autoAdjust").each((t,e)=>{e.setAttribute("style","height:"+e.scrollHeight+"px;overflow-y:hidden;")}).on("input",t=>{t.target.style.height="auto",t.target.style.height=t.target.scrollHeight+"px",this.resize()}),$(".toggleTable").on("click",t=>{var e=$(t.currentTarget).data("table"),a=$("#"+e);this.toggleTableFuncs(a)}),$(".toCSV").on("click",t=>{var e=$(t.currentTarget).data("table"),a=luxon.DateTime.now().toISODate(),r="table_"+e+"_"+a,i=$("#errorMsg");this.toCSVFuncs(r,e,i)}),$(".copyData").on("click",t=>{var e=$(t.currentTarget).data("table"),a=this.tableSearch(e),r=$(".copyHead"+a),i=$(".transpose"+a),n=$("#"+e),o=n.parent(),s=$("#errorMsg"),c=$("#forCopy");this.copyDataFuncs(r,n,o,s,c,i)}),$("#the_form").on("input",t=>{$(t.target).data("watch")?this.watchValue($(t.target)):this.updateCalcFromEl(t.target)}),$("input, select, textarea").each((t,e)=>{"button"!=$(e).attr("type")&&($(e).data("watch")?this.watchValue($(e)):this.updateCalcFromEl(e))}),this.resize()},resize:function(){this.parent_class.resize_container()},checkForNames:function(){$("input, select, textarea").each((t,e)=>{var a=$(e).attr("name");if(a){var r=/[A-Z]/.test(a);r&&console.log("The name contains an uppercase letter for: ",e.id)}else console.log("There is no name attribute for: ",e.id)})},getDynamicContent:function(){var t={};return t},data_valid_form:function(t){var e,a=!0,r=$("<div></div>").append("Missing values for:");return $(".needForTable").each((t,i)=>{$(i).val()||(a=!1,e=$(i).attr("id"),r.append("<br/>"+e))}),a?t.html(""):(t.html("<span style='color:red; font-size:36px;'>Please fill out all elements marked by a</span><span style='color:blue; font-size:36px;'> blue #</span>"),t.append(r)),this.resize(),a},runIfConfirmed:function(t,e,a=null){var r="Are you sure?";t&&(r=t);var i="auto";a&&(i=a.offsetTop+"px"),bootbox.confirm({message:r,callback:t=>{t&&e()}}),$(".modal-dialog").css("top",i)},dialogConfirm:function(t,e,a=null){var r="Do you want to proceed?";t&&(r=t);var i="auto";a&&(i=a.offsetTop+"px"),bootbox.confirm({message:r,callback:t=>{e(t)}}),$(".modal-dialog").css("top",i)},runBasedOnInput:function(t,e,a=null){var r="Enter value:";t&&(r=t);var i="auto";a&&(i=a.offsetTop+"px"),bootbox.prompt({title:r,callback:t=>{e(t)}}),$(".modal-dialog").css("top",i)},checkInArray:function(t,e){var a=-1!==$.inArray(t,e);return a},dataSearch:function(t,e){var a="[data-"+t+"='"+e+"']";return a},tableSearch:function(t){var e=this.dataSearch("table",t);return e},calcSearch:function(t){var e=this.dataSearch("calc",t);return e},daySearch:function(t){var e=this.dataSearch("day",t);return e},mouseSearch:function(t){var e=this.dataSearch("mouse",t);return e},updateCalcFromEl:function(t){var e=t.id,a=t.value,r=this.calcSearch(e);$(r).html(a),this.resize()},updateCalcFromVal:function(t,e){var a=this.calcSearch(t);$(a).text(e),this.resize()},watchValue:function(t){var e=t.data("watch"),a=my_widget_script.calcSearch(e),r=t.data("day"),i=t.data("mouse"),n=t.val();r&&(a+=my_widget_script.daySearch(r)),i&&(a+=my_widget_script.mouseSearch(i)),"mouse"==e&&(n||(n="Mouse "+i)),$(a).html(n),my_widget_script.resize()},toggleTableFuncs:function(t){this.data_valid_form($("#errorMsg")),t.toggle(),this.resize()},toCSVFuncs:function(t,e,a){var r=this.data_valid_form(a);r?(this.exportTableToCSV(t,e),a.html("<span style='color:grey; font-size:24px;'>Saved successfully</span>")):a.append("<br/><span style='color:grey; font-size:24px;'>Did not export</span>")},downloadCSV:function(t,e){var a,r;a=new Blob([t],{type:"text/csv"}),r=document.createElement("a"),r.download=e,r.href=window.URL.createObjectURL(a),r.style.display="none",document.body.appendChild(r),r.click()},exportTableToCSV:function(t,e){for(var a=[],r=document.getElementById(e),i=r.querySelectorAll("tr"),n=0;n<i.length;n++){for(var o=[],s=i[n].querySelectorAll("td, th"),c=0;c<s.length;c++){var d='"'+s[c].innerText+'"';o.push(d)}a.push(o.join(","))}this.downloadCSV(a.join("\n"),t)},copyDataFuncs:function(t,e,a,r,i,n){var o=this.data_valid_form(r),s=!1,c=!1;t.is(":checked")&&(s=!0),n.is(":checked")&&(c=!0),o?(a.show(),this.resize(),this.copyTable(e,s,i,c),r.html("<span style='color:grey; font-size:24px;'>Copied attempted</span>")):r.append("<br/><span style='color:grey; font-size:24px;'>Nothing was copied</span>")},copyTable:function(t,e,a,r){var i=$("<textarea style='opacity:0;'></textarea>"),n=[],o=0;e&&t.find("thead").children("tr").each((t,e)=>{r&&(o=0),$(e).find("td, th").each((t,e)=>{void 0===n[o]&&(n[o]=[]),n[o].push($(e).text()),r&&o++}),r||o++}),t.find("tbody").children("tr").each((t,e)=>{r&&(o=0),$(e).find("td, th").each((t,e)=>{void 0===n[o]&&(n[o]=[]),n[o].push($(e).text()),r&&o++}),r||o++});for(var s=0;s<n.length;s++)n[s]=n[s].join("\t");i.append(n.join("\n")),i.appendTo(a).select(),document.execCommand("copy"),i.remove()},toggleCard:function(t){t.next().toggleClass("collapse"),t.next().find("textarea.autoAdjust").each((t,e)=>{$(e).is(":hidden")||e.setAttribute("style","height:"+e.scrollHeight+"px;overflow-y:hidden;")}),this.resize()},makeCard:function(t,e,a){t.append($("<div></div>",{class:"card"}).append($("<button></button>",{type:"button",class:"card-header"}).on("click",t=>{this.toggleCard($(t.currentTarget))}).append(e)).append($("<div></div>",{class:"card-body collapse"}).append(a))),this.resize()}};